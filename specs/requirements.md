# Email Newsletter CMS - 原始需求文件

**建立日期**: 2025-11-15
**需求來源**: 初始專案規劃
**狀態**: ✅ 已記錄並展開為 User Stories

> 📋 **User Stories 展開**：請參閱 [`FUTURE-PLANS-DETAILS.md`](./FUTURE-PLANS-DETAILS.md#完整-user-stories)
>
> 📊 **實作追蹤**：請參閱 [`FUTURE-PLANS.md`](./FUTURE-PLANS.md)

---

## 需求概述

本系統為教育機構（幼稚園/學校）設計的電子報內容管理系統（CMS），結合郵件發送與內容管理功能。核心目標是讓家長根據孩子所屬班級，接收個人化的週報內容。

---

## Email Newsletter 需求

### 1. 班級對應的內容區塊
**原始需求**：不同班級會有對應的 Block

**說明**：
- 每個班級（如「小熊班」、「小兔班」）有獨立的內容區塊
- 內容區塊可儲存該班級專屬的文章
- 系統根據家長的孩子所屬班級，顯示對應的內容

**對應 User Story**: US-EMAIL-001

---

### 2. 每週複製模板進行內容修改
**原始需求**：通過頁面發送，每周 copy template，進行內容修改

**說明**：
- 編輯者可複製上週的電子報作為模板
- 保留原有結構和格式，僅修改具體內容
- 提高週報製作效率，保持風格一致性

**對應 User Story**: US-EMAIL-002

---

### 3. 開信率與點擊率統計
**原始需求**：需要歸類統計來看開信率及點擊率

**說明**：
- 追蹤郵件開信數量與開信率
- 追蹤文章內連結的點擊次數與點擊率
- 支援分班級統計，對比不同班級的數據
- 匯出統計報表

**對應 User Story**: US-EMAIL-003

---

### 4. 多子女家長合併郵件
**原始需求**：家長有幾個孩子，不用收多封郵件

**說明**：
- 一個家長若有多個孩子在不同班級，只收到一封郵件
- 郵件或網頁中同時包含所有孩子班級的內容
- 避免郵件氾濫，提升用戶體驗

**對應 User Story**: US-EMAIL-004

---

### 5. 統一外觀的個人化內容
**原始需求**：收到的電郵都是看起來一樣的，CMS 判斷身份來顯示對應的班級大小事

**說明**：
- 所有家長收到的郵件外觀（品牌、版式）完全一致
- 點開郵件連結後，CMS 根據家長身份（通過 token 或登入）動態顯示專屬內容
- 通用內容（校長的話、全校活動）對所有人相同
- 班級專屬內容（班級大小事）根據身份個人化呈現

**對應 User Story**: US-EMAIL-005

---

### 6. 第三方郵件平台 API 整合 ⭐ 新增
**原始需求**：通過 API 更新用戶自定義資料，例如每位家長應看到的班級大小事內容

**說明**：
- 整合 Kit Email Platform (ConvertKit) 等第三方郵件服務
- 通過 API 同步家長的班級關聯資料到郵件平台
- 使用自定義欄位和標籤管理訂閱者分類
- 雙向資料同步（CMS ↔ 郵件平台）
- 接收 Webhook 事件（訂閱、退訂、欄位更新）

**對應功能**: 第三方郵件平台 API 整合 (P2)

---

## CMS 需求

### 1. 按週顯示多篇文章（含善話）
**原始需求**：可以按照每週的，善話來去顯示多篇文章

**說明**：
- 每週有一句「每週一句善話」
- 該週包含多篇文章
- 文章和善話一起呈現在週報頁面

**對應 User Story**: US-CMS-001 ✅ 已實作

---

### 2. 新增文章與設定順序
**原始需求**：可以新增每週的文章。可以設定文章的順序

**說明**：
- 編輯者可為某週新增文章
- 可自由調整文章的顯示順序（拖拽排序）
- 順序變更即時生效

**對應 User Story**:
- US-CMS-002（新增文章）
- US-CMS-003（設定順序）

---

### 3. 班級權限控制
**原始需求**：不同的班級有特定權限看其中一篇文章，家長只可看到自己小孩班級的，名為「班級大小事」

**說明**：
- 文章可設為「班級專屬」或「全校公開」
- 班級專屬文章只對該班級家長可見
- 家長只看到自己孩子班級的「班級大小事」
- 全校公開文章對所有家長可見

**對應 User Story**: US-CMS-004

---

### 4. 文章獨立 URL 與週報 URL
**原始需求**：每一篇文章都有獨立的URL。然後這一週的系列文章也是有一個URL來去標記

**說明**：
- 每篇文章有唯一的可分享 URL（如 `/newsletter/2025-w46/article/123`）
- 每週的週報有統一 URL（如 `/newsletter/2025-w46`）
- URL 永久有效，方便在郵件和社群媒體分享

**對應 User Story**:
- US-CMS-005（文章獨立 URL）✅ 已實作
- US-CMS-006（週報統一 URL）✅ 已實作

---

### 5. 多班級家長合併查看
**原始需求**：如果我有兩個小孩在不同的班級，我希望可以一併看這兩個班級的，班級大小事

**說明**：
- 家長有多個孩子在不同班級時，在同一頁面同時看到所有班級的內容
- 清楚標記各班級的文章
- 無需切換頁面或登入多次

**對應 User Story**: US-CMS-007

---

### 6. 文章導航快速切換
**原始需求**：同一周的文章，可以，通過導航快速地去滑動切換，看上一篇下一篇文章

**說明**：
- 提供「上一篇」、「下一篇」導航按鈕
- 支援鍵盤快捷鍵（左右方向鍵）
- 可選：支援手機滑動手勢

**對應 User Story**: US-CMS-008 ✅ 已實作

---

### 7. 文章支援圖片與文字
**原始需求**：文章的內容可以有圖片跟文字

**說明**：
- 支援圖片上傳或 URL 輸入
- 支援文字格式化（粗體、斜體、標題、列表等）
- 自動壓縮圖片並生成多種尺寸（原圖、縮圖）

**對應 User Story**: US-CMS-009

---

### 8. 多媒體支援（錄音、影片）
**原始需求**：也可以加入多媒體，像錄音、影片（embed YouTube）

**說明**：
- 支援 YouTube 影片嵌入（自動解析 URL）
- 支援音訊檔案上傳（MP3, WAV）
- 自動轉換為優化格式

**對應 User Story**: US-CMS-010

---

### 9. 老師編輯權限
**原始需求**：老師可以去編輯這些文章的內容

**說明**：
- 老師可編輯所屬班級的文章
- 不能編輯其他班級的文章
- 可選：支援編輯審核工作流

**對應 User Story**: US-CMS-011

---

### 10. 整合統計數據
**原始需求**：整合統計數據

**說明**：
- 在 CMS 內直接查看文章的閱讀數據
- 顯示開信數、點擊數、閱讀完成率
- 提供視覺化儀表板（圖表）
- 支援報表匯出（CSV/Excel）

**對應 User Story**: US-CMS-012

---

## 需求追溯矩陣

| 原始需求編號 | 需求描述 | 對應 User Story | 優先級 | 狀態 |
|------------|---------|----------------|--------|------|
| EMAIL-1 | 班級對應的內容區塊 | US-EMAIL-001 | P1 | 📋 待開發 |
| EMAIL-2 | 每週複製模板 | US-EMAIL-002 | P2 | 📋 待開發 |
| EMAIL-3 | 開信率與點擊率統計 | US-EMAIL-003 | P2 | 📋 待開發 |
| EMAIL-4 | 多子女合併郵件 | US-EMAIL-004 | P1 | 📋 待開發 |
| EMAIL-5 | 統一外觀個人化內容 | US-EMAIL-005 | P2 | 📋 待開發 |
| EMAIL-6 | 第三方郵件平台 API | - | P2 | 📋 待開發 |
| CMS-1 | 按週顯示文章含善話 | US-CMS-001 | P1 | ✅ 已實作 |
| CMS-2 | 新增文章 | US-CMS-002 | P1 | 📋 待開發 |
| CMS-3 | 設定文章順序 | US-CMS-003 | P2 | 📋 待開發 |
| CMS-4 | 班級權限控制 | US-CMS-004 | P1 | 📋 待開發 |
| CMS-5 | 文章獨立 URL | US-CMS-005 | P1 | ✅ 已實作 |
| CMS-6 | 週報統一 URL | US-CMS-006 | P1 | ✅ 已實作 |
| CMS-7 | 多班級合併查看 | US-CMS-007 | P1 | 📋 待開發 |
| CMS-8 | 文章導航切換 | US-CMS-008 | P2 | ✅ 已實作 |
| CMS-9 | 圖片與文字 | US-CMS-009 | P1 | 📋 待開發 |
| CMS-10 | 多媒體支援 | US-CMS-010 | P2 | 📋 待開發 |
| CMS-11 | 老師編輯權限 | US-CMS-011 | P2 | 📋 待開發 |
| CMS-12 | 整合統計數據 | US-CMS-012 | P3 | 📋 待開發 |

---

## 需求變更記錄

### 2025-11-15
- **新增需求**：EMAIL-6 第三方郵件平台 API 整合
  - 通過 Kit Email Platform (ConvertKit) API 管理訂閱者
  - 同步家長班級關聯資料
  - 雙向資料同步與 Webhook 處理

### 2025-11-15
- **初始記錄**：記錄所有原始需求（EMAIL-1 至 CMS-12）
- **展開 User Stories**：17 個需求已展開為詳細 User Stories
- **標記實作狀態**：4 個功能已實作（CMS-1, 5, 6, 8）

---

**文件維護**：此文件記錄原始需求，不應修改。新需求請添加到「需求變更記錄」章節。
